# 작업 로그 - 2026-02-06

## 완료: 날짜 선택 기능 + 등록 후 플로우 개선

### 구현 내용

#### 1. DayCell - selectable/isSelected props 추가
- `selectable` prop: `true`일 때 거래 없는 날짜도 터치 가능
- `isSelected` prop: 선택된 날짜에 파란 배경(#BBDEFB) 스타일 적용
- 기존 동작 유지 (props 생략 시 기존과 동일)

#### 2. CalendarGrid - selectable/selectedDay props 전달
- `selectable`, `selectedDay` props를 DayCell로 전달
- 기존 동작 변경 없음

#### 3. DatePickerModal 신규 컴포넌트
- Modal + CalendarHeader + CalendarGrid (selectable 모드) 조합
- 월 이동 (이전/다음) 지원, 연도 경계 처리
- 날짜 선택 시 `onDateSelect` 콜백, 취소 버튼

#### 4. DateSelector 신규 컴포넌트
- "오늘" / "어제" / "직접 선택" 3버튼 UI
- 선택된 날짜 표시: "2026년 2월 6일 (금)" 형식
- "직접 선택" → DatePickerModal 열기
- 선택 상태에 따라 active 스타일 자동 적용

#### 5. Navigation 타입 수정
- `Home: { selectedDate?: string } | undefined` — 'YYYY-MM-DD' 형식

#### 6. AddTransactionScreen 수정
- DateSelector 통합 (금액 입력 위에 배치)
- 거래 생성 시 `selectedDate` 사용 (`new Date()` 대신)
- "확인" → `navigation.navigate('Home', { selectedDate: 'YYYY-MM-DD' })`
- "계속 등록하기" → 금액/메모 초기화 + 날짜를 오늘로 리셋

#### 7. HomeScreen 라우트 파라미터 처리
- `route.params?.selectedDate` 감지
- 캘린더 뷰로 전환 + 해당 월로 이동 + DayDetailModal 자동 열기
- 파라미터 소비 후 클리어 (`setParams({ selectedDate: undefined })`)

### 테스트 결과
- **228개 테스트 전체 통과**
- **커버리지**: Stmts 91.54% / Branches 91.63% / Functions 87.05% / Lines 91.51%
- 신규 컴포넌트 (DatePickerModal, DateSelector): **100% 커버리지**

### 수정 파일 목록
| 구분 | 파일 |
|------|------|
| 수정 | `src/views/components/DayCell.tsx` |
| 수정 | `src/views/components/CalendarGrid.tsx` |
| 신규 | `src/views/components/DatePickerModal.tsx` |
| 신규 | `src/views/components/DateSelector.tsx` |
| 수정 | `src/types/navigation.ts` |
| 수정 | `src/views/screens/AddTransactionScreen.tsx` |
| 수정 | `src/views/screens/HomeScreen.tsx` |
| 수정 | `__tests__/components/DayCell.test.tsx` |
| 수정 | `__tests__/components/CalendarGrid.test.tsx` |
| 신규 | `__tests__/components/DatePickerModal.test.tsx` |
| 신규 | `__tests__/components/DateSelector.test.tsx` |
| 수정 | `__tests__/screens/AddTransactionScreen.test.tsx` |
| 수정 | `__tests__/screens/HomeScreen.test.tsx` |

---

## 기타 TODO

### Phase 1.5 남은 작업
- [ ] 테마 시스템 (Light/Dark 모드)

### Phase 2: AsyncStorage 연동
- [ ] @react-native-async-storage/async-storage 설치
- [ ] StorageService 구현
- [ ] 서비스 레이어 연동
